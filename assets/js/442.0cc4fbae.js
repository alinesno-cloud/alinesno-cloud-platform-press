(window.webpackJsonp=window.webpackJsonp||[]).push([[442],{669:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),t("p",[s._v("单机版安装只为用于学习使用，生产中请使用集群模式，此处以阿里云服务器做为示例用于学习,")]),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),s._v(" "),s._m(8),s._v(" "),s._m(9),s._v(" "),t("p",[s._v("添加 elk 用户")]),s._v(" "),s._m(10),t("p",[s._v("解压 es,并启动，一般无非端口或者内存的原因，这步一般情况下是很顺利的")]),s._v(" "),s._m(11),t("p",[s._v("解压 logstash")]),s._v(" "),s._m(12),s._m(13),s._v(" "),s._m(14),t("p",[s._v("配置内容如下，这里启动了一个 tcp 服务，端口是 4567，然后向本地的 es 输入")]),s._v(" "),s._m(15),t("p",[s._v("启动 logstash")]),s._v(" "),s._m(16),t("p",[s._v("安装 kibana 客户端")]),s._v(" "),s._m(17),s._m(18),s._v(" "),t("img",{attrs:{src:s.$withBase("/operation/kibana_01.png")}})])}),[function(){var s=this._self._c;return s("h1",{attrs:{id:"elk-单机版本安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk-单机版本安装"}},[this._v("#")]),this._v(" ELK 单机版本安装")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var s=this._self._c;return s("ul",[s("li",[this._v("ELK 单机版本安装")]),this._v(" "),s("li",[this._v("启动并配置 logstash 配置(此处只为 demo)")])])},function(){var s=this._self._c;return s("h2",{attrs:{id:"elk-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk-安装"}},[this._v("#")]),this._v(" elk 安装")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[this._v("#")]),this._v(" 说明")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"上传软件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传软件"}},[this._v("#")]),this._v(" 上传软件")])},function(){var s=this._self._c;return s("p",[this._v("上传 Jenkins 至 Linux 服务器"),s("code",[this._v("/home/alinesno/elk")]),this._v("目录")])},function(){var s=this._self._c;return s("blockquote",[s("p",[this._v("此处用户可以使用 xftp 或者 xshell 等工具，书要简言")])])},function(){var s=this._self._c;return s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[this._v("#")]),this._v(" 安装")])},function(){var s=this._self._c;return s("blockquote",[s("p",[this._v("elk 启动需要使用非 root 用户操作，所以此处添加 elk 用户，并用此用户操作，生产也强烈建议以非 root 操作")])])},function(){var s=this._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("useradd")]),this._v(" elk\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 如果需要设置密码则做如此操作")]),this._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("passwd")]),this._v(" elk\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("su")]),this._v(" elk\n")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf elasticsearch-6.5.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-6.5.1  elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 表示后面运行")]),s._v("\n./bin/elasticsearch -d\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看启动日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f logs/elasticsearch.log\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程是否存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" elasticsearch\n")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf logstash-6.5.1.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" logstash-6.5.1 logstash\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" logstash\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看示例配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" config/logstash-sample.conf\n")])])])},function(){var s=this._self._c;return s("p",[this._v("此处为与 alinesno-cloud 平台整合，所以添加以下配置,编辑文件名称为"),s("code",[this._v("logstash.conf")])])},function(){var s=this._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("vim")]),this._v(" config/logstash.conf\n")])])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("input"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    tcp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        mode => "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server"')]),s._v("\n        host => "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v("\n        port => "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4567")]),s._v("\n        codec => json_lines\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\noutput"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    elasticsearch "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        hosts=>"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        index => "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"alinesno-cloud-%{+YYYY.MM.dd}"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    stdout"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        codec => rubydebug\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])},function(){var s=this._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[this._v("cd")]),this._v(" logstash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("nohup")]),this._v(" ./bin/logstash -f ./config/logstash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("tail")]),this._v(" -f nohup.out\n")])])])},function(){var s=this._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("tar")]),this._v(" -zxvf kibana-6.5.1-linux-x86_64.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("mv")]),this._v(" kibana-6.5.1-linux-x86_64 kibana\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("nohup")]),this._v(" bin/kibana "),s("span",{pre:!0,attrs:{class:"token operator"}},[this._v("&")]),this._v("\n")])])])},function(){var s=this._self._c;return s("p",[this._v("访问"),s("code",[this._v("http://localhost:5601")]),this._v("，见如下界面:")])}],!1,null,null,null);t.default=e.exports}}]);