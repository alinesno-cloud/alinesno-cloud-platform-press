(window.webpackJsonp=window.webpackJsonp||[]).push([[485],{712:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("安装 CDH6.2.0 后，可在 CDH 监控台上管理、监控、诊断、集成 hadoop 集群。")]),t._v(" "),e("p",[t._v("管理：对 hadoop 集群进行管理。如添加、删除节点。如启动、停止、重启、配置 HDFS、Hive、Impala、Spark、Sqoop、yarn、ZooKeeper 等服务的操作。")]),t._v(" "),e("p",[t._v("监控：监控 hadoop 集群的健康情况，对设置的各种指标和系统运行情况进行全面监控。")]),t._v(" "),e("p",[t._v("诊断：对 hadoop 集群出现的问题进行诊断，对出现的问题给出建议解决方案。")]),t._v(" "),e("p",[t._v("集成：根据需要安装组件组合，如只安装 HDFS、Hive、yarn、ZooKeeper。")]),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("链接：https://pan.baidu.com/s/1g4ZzKot5I9DrWVyrehgDiw提取码：9ew7")]),t._v(" "),e("p",[t._v("包含 cloudera-repos-6.2.0 、mysql-5.7、parcel-6.2.0 ，文件上传指定路径")]),t._v(" "),t._m(5),e("p",[t._v("centos7 准备 、xshell 准备")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),e("p",[t._v("登录集群所有机器")]),t._v(" "),e("p",[t._v("执行命令：")]),t._v(" "),t._m(8),e("p",[t._v("将集群角色和 IP 写入，类似")]),t._v(" "),t._m(9),t._m(10),t._v(" "),e("p",[t._v("在所有节点都安装 ntp 服务器")]),t._v(" "),t._m(11),e("p",[t._v("修改所有节点 ntp 服务配置文件")]),t._v(" "),t._m(12),e("p",[t._v("修改内容如下")]),t._v(" "),t._m(13),e("p",[t._v("在所有节点启动 ntp 服务")]),t._v(" "),t._m(14),e("p",[t._v("添加到开机启动项里面")]),t._v(" "),t._m(15),t._m(16),t._v(" "),e("p",[t._v("登录集群所有机器（配置完这些后一定要重启机器，否则 selinux 还是没有即时生效，到时 web 界面中无法访问到 httpd 指定路径下的资源）")]),t._v(" "),e("p",[t._v("执行命令：")]),t._v(" "),t._m(17),t._m(18),t._v(" "),e("p",[t._v("登录集群所有机器")]),t._v(" "),e("p",[t._v("执行命令")]),t._v(" "),t._m(19),e("p",[t._v("修改")]),t._v(" "),t._m(20),e("p",[t._v("修改 linux swappiness 参数")]),t._v(" "),e("p",[t._v("设置为 0，重启后又还原")]),t._v(" "),t._m(21),e("p",[t._v("修改配置文件")]),t._v(" "),t._m(22),e("p",[t._v("添加参数")]),t._v(" "),t._m(23),e("p",[t._v("上述在 el6 中有效，在 el7 中 tuned 服务会动态调整参数，查找 tuned 配置，直接修改，进入 tuned 目录")]),t._v(" "),t._m(24),e("p",[t._v("查找包含的所在文件路径")]),t._v(" "),t._m(25),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/0.png")}}),t._v(" "),e("p",[t._v("逐个修改参数为 vm.swappiness=0")]),t._v(" "),e("p",[t._v("提供快捷命令复制")]),t._v(" "),t._m(26),e("p",[t._v("修改后确认，只是查看一下是否改了")]),t._v(" "),t._m(27),e("p",[t._v("节点禁用透明页")]),t._v(" "),e("p",[t._v("立刻生效")]),t._v(" "),t._m(28),e("p",[t._v("永久生效 在 /etc/rc.local 末尾添加两行")]),t._v(" "),t._m(29),e("p",[t._v("添加内容")]),t._v(" "),t._m(30),e("p",[t._v("给与可执行权限")]),t._v(" "),t._m(31),t._m(32),t._v(" "),e("p",[t._v("agent 节点不需要使用到数据库，无需安装，但是需要在 /usr/share/java 下放入数据库驱动。")]),t._v(" "),e("p",[t._v("先卸载自带的数据库")]),t._v(" "),e("p",[t._v("查找并卸载老版本 MySQL")]),t._v(" "),t._m(33),e("p",[t._v("进入资源目录")]),t._v(" "),t._m(34),e("p",[t._v("解压")]),t._v(" "),t._m(35),e("p",[t._v("安装")]),t._v(" "),t._m(36),e("p",[t._v("先启动才有后续操作")]),t._v(" "),t._m(37),e("p",[t._v("查看启动状态")]),t._v(" "),t._m(38),e("p",[t._v("查看初始密码（MySQL 启动后才会有默认初始密码）")]),t._v(" "),t._m(39),e("p",[t._v("如 iro5kMd2lg!:")]),t._v(" "),e("p",[t._v("登录 MySQL，使用上边初始的密码")]),t._v(" "),t._m(40),e("p",[t._v("设置密码")]),t._v(" "),t._m(41),e("p",[t._v("开启数据库远程访问（% 位置也可以指定 IP ）")]),t._v(" "),t._m(42),e("p",[t._v("刷新远程设置")]),t._v(" "),t._m(43),e("p",[t._v("创建元数据库和用户")]),t._v(" "),t._m(44),e("p",[t._v("查看数据库")]),t._v(" "),t._m(45),e("p",[t._v("退出 MySQL 命令界面")]),t._v(" "),t._m(46),e("p",[t._v("测试是否可以本地连接")]),t._v(" "),t._m(47),t._m(48),t._v(" "),e("p",[t._v("查看原来存在的 JDK")]),t._v(" "),t._m(49),e("p",[t._v("删除自带的 JDK")]),t._v(" "),t._m(50),e("p",[t._v("jdk 文件路径")]),t._v(" "),t._m(51),e("p",[t._v("安装 jdk，jdk1.8.0_181-cloudera 默认会在 /usr/java 下")]),t._v(" "),t._m(52),e("p",[t._v("配置环境变量")]),t._v(" "),t._m(53),e("p",[t._v("使生效")]),t._v(" "),t._m(54),e("p",[t._v("查看版本")]),t._v(" "),t._m(55),t._m(56),t._v(" "),t._m(57),t._v(" "),e("p",[t._v("安装前提依赖（若第一次安装出现 ERROR，请重新运行该命令即可）")]),t._v(" "),t._m(58),e("p",[t._v("分别安装 daemon、server、agent")]),t._v(" "),t._m(59),e("p",[t._v("修改 /etc/cloudera-scm-agent/config.ini")]),t._v(" "),t._m(60),e("p",[t._v("修改内容为")]),t._v(" "),t._m(61),e("p",[t._v("修改 cloudera-scm-server/db.properties 文件")]),t._v(" "),t._m(62),t._m(63),t._v(" "),e("p",[t._v("安装 httpd 服务")]),t._v(" "),t._m(64),e("p",[t._v("MySQL 所在节点安装 MySQL 驱动")]),t._v(" "),t._m(65),e("p",[t._v("将 parcel 相关的三个文件拷贝进去")]),t._v(" "),t._m(66),e("p",[t._v("如果没下载 sha，可以生成 sha1sum CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel | awk '{ print $1 }' > CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel.sha")]),t._v(" "),t._m(67),t._v(" "),t._m(68),e("p",[t._v("要等到完全启动成功后才能访问 web 页面")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/1.png")}}),t._v(" "),e("p",[t._v("查看日志若看到")]),t._v(" "),t._m(69),e("p",[t._v("查看 7180 端口")]),t._v(" "),t._m(70),e("p",[t._v("和看到 7180 被启用，才说明 CM 启动成功，cloudera-scm-server 启动比较漫长请各位耐心等待。")]),t._v(" "),e("p",[t._v("开放端口")]),t._v(" "),t._m(71),t._m(72),t._v(" "),e("p",[t._v("访问地址，只要确保 cloudera-scm-server 启动正常就可以访问 web 页面，初始登录账户密码都是 admin")]),t._v(" "),e("p",[t._v("http://192.168.153.132:7180/cmf/login")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login.png")}}),t._v(" "),e("p",[t._v("点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login1.png")}}),t._v(" "),e("p",[t._v("选择接受协议，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login2.png")}}),t._v(" "),e("p",[t._v("选择免费，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login3.png")}}),t._v(" "),e("p",[t._v("进入群集安装，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login4.png")}}),t._v(" "),e("p",[t._v("设置集群名称，点击 Continue")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login5.png")}}),t._v(" "),e("p",[t._v("进入 Specify Hosts（只有启动了 server 和其他 agent 才显示，才可以后续操作）")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login6.png")}}),t._v(" "),e("p",[t._v("点击当前管理的主机，显示当前的所有 agent 节点")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login7.png")}}),t._v(" "),e("p",[t._v("选中所有节点，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login7_0.png")}}),t._v(" "),e("p",[t._v("出现存储库文件不对应，我们需要设置")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login9.png")}}),t._v(" "),e("p",[t._v("点击更多选项进入这个弹窗页面")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login10.png")}}),t._v(" "),e("p",[t._v("修改为")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login11.png")}}),t._v(" "),e("p",[t._v("注意：")]),t._v(" "),e("p",[t._v("需要测试访问 http://192.168.153.132/cdh6_parcel/ 有没有 CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel 文件")]),t._v(" "),e("p",[t._v("若出现")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login12.png")}}),t._v(" "),e("p",[t._v("说明访问不到 httpd 下 cdh6_parcel/ 下 的目录，这是因为在设置 selinux=disabled 的时候机器没有重启，重启后就访问正常了。")]),t._v(" "),e("p",[t._v("访问成功的结果是")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login13.png")}}),t._v(" "),e("p",[t._v("接下来配置的 parcel 源路径为 http://192.168.153.132/cdh6_parcel/")]),t._v(" "),e("p",[t._v("修改成功后可以看到 CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login14.png")}}),t._v(" "),e("p",[t._v("点击继续，会进入群集安装，等待下载、分配、解压、激活，耐心等待片刻")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login15.png")}}),t._v(" "),e("p",[t._v("等待安装成功后会自动进入")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login16.png")}}),t._v(" "),e("p",[t._v("点击 Inspect Network Performance、Inspect Hosts 会进行性能的检测")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login17.png")}}),t._v(" "),e("p",[t._v("需要耐心等待会有结果")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login18.png")}}),t._v(" "),e("p",[t._v("但是这结果先不要了，选中 I understand the risks, let me continue with cluster creation. 点击继续")]),t._v(" "),e("p",[t._v("添加服务，当然也可以点击群集，选择群集")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login19.png")}}),t._v(" "),e("p",[t._v("点击操作，然后选择添加服务")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login20.png")}}),t._v(" "),e("p",[t._v("选择需要的服务，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login21.png")}}),t._v(" "),e("p",[t._v("此处我选择了 zookeeper 服务，点击继续")]),t._v(" "),e("p",[t._v("选择机器，点击确定，点击继续")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login22.png")}}),t._v(" "),e("p",[t._v("进入如图")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login23.png")}}),t._v(" "),e("p",[t._v("点击 Continue，会进行服务的安装等待")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login24.png")}}),t._v(" "),e("p",[t._v("完成后点击继续，有两次继续，进入主页状态，可以看到刚刚安装好的 zookeeper 服务")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/operation/CDH/login25.png")}}),t._v(" "),t._m(73),t._v(" "),e("p",[t._v("配置从节点的 proxy_pass")]),t._v(" "),t._m(74),e("p",[t._v("修改配置对应节点的 conf 文件")]),t._v(" "),e("p",[t._v("如")]),t._v(" "),t._m(75),e("p",[t._v("配置如下 proxy_pass 属性")]),t._v(" "),t._m(76),t._m(77),t._v(" "),t._m(78),t._v(" "),e("table",[t._m(79),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Apache Avro")]),t._v(" "),e("td",[t._v("1.8.2")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/avro/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Flume")]),t._v(" "),e("td",[t._v("1.9.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/flume-ng/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Hadoop")]),t._v(" "),e("td",[t._v("3.0.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/hadoop-common/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache HBase")]),t._v(" "),e("td",[t._v("2.1.2")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/hbase/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("HBase Indexer")]),t._v(" "),e("td",[t._v("1.5")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/hbase-indexer/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Hive")]),t._v(" "),e("td",[t._v("2.1.1")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/hive/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Hue")]),t._v(" "),e("td",[t._v("4.3.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/hue/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Impala")]),t._v(" "),e("td",[t._v("3.2.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/impala/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Kafka")]),t._v(" "),e("td",[t._v("2.1.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/kafka/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),t._m(80),t._v(" "),e("tr",[e("td",[t._v("Apache Kudu")]),t._v(" "),e("td",[t._v("1.9.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/kudu/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Solr")]),t._v(" "),e("td",[t._v("7.4.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/lucene-solr/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Oozie")]),t._v(" "),e("td",[t._v("5.1.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/oozie/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Parquet")]),t._v(" "),e("td",[t._v("1.9.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/parquet-mr/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Parquet-format")]),t._v(" "),e("td",[t._v("2.3.1")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/parquet-format/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Pig")]),t._v(" "),e("td",[t._v("0.17.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/pig/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Sentry")]),t._v(" "),e("td",[t._v("2.1.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/sentry/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Spark")]),t._v(" "),e("td",[t._v("2.4.0")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/spark/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache Sqoop")]),t._v(" "),e("td",[t._v("1.4.7")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/sqoop/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("Apache ZooKeeper")]),t._v(" "),e("td",[t._v("3.4.5")]),t._v(" "),e("td",[e("a",{attrs:{href:"https://github.com/cloudera/zookeeper/tree/cdh6.2.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Changes"),e("OutboundLink")],1)])])])])])}),[function(){var t=this._self._c;return t("h1",{attrs:{id:"cdh6-2-0-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cdh6-2-0-安装"}},[this._v("#")]),this._v(" CDH6.2.0 安装")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"本内容你将获得"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[t._v("如何在 centos7 服务器上配置 hosts")]),t._v(" "),e("li",[t._v("如何在 centos7 服务器上设置 ntp 时钟同步")]),t._v(" "),e("li",[t._v("如何在 centos7 服务器上关闭防火墙")]),t._v(" "),e("li",[t._v("如何在 centos7 服务器上安装 MySQL")]),t._v(" "),e("li",[t._v("如何在 centos7 服务器上安装 JDK")]),t._v(" "),e("li",[t._v("如何在 centos7 服务器上安装 CDH")]),t._v(" "),e("li",[t._v("如何启动 CDH server 和 agent 节点")]),t._v(" "),e("li",[t._v("如何访问 CDH 监控台")])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"cdh6-2-0-说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cdh6-2-0-说明"}},[this._v("#")]),this._v(" CDH6.2.0 说明")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"_1-下载-cdh-6-2-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载-cdh-6-2-0"}},[this._v("#")]),this._v(" 1. 下载 CDH 6.2.0")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mkdir -p /mnt/install-tools/cdh/\ncd /mnt/install-tools/cdh/\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"_2-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置"}},[this._v("#")]),this._v(" 2. 配置")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_2-1-配置-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-配置-hosts"}},[this._v("#")]),this._v(" 2.1 配置 Hosts")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi /etc/hosts\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("192.168.153.132 cdh1\n192.168.153.133 cdh2\n192.168.153.134 cdh3\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_2-3-ntp-时钟同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-ntp-时钟同步"}},[this._v("#")]),this._v(" 2.3 ntp 时钟同步")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("yum install -y ntp\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vim /etc/ntp.conf\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("#将下面的四行注释掉\n#server 0.centos.pool.ntp.org iburst\n#server 1.centos.pool.ntp.org iburst\n#server 2.centos.pool.ntp.org iburst\n#server 3.centos.pool.ntp.org iburst\n\n#然后新增一条\nserver ntp.aliyun.com\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("service ntpd start\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("systemctl enable ntpd.service\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_2-4-关闭防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-关闭防火墙"}},[this._v("#")]),this._v(" 2.4 关闭防火墙")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 1. 关闭防火墙服务\nsystemctl stop firewalld\n# 2. 禁止防火墙服务开机自启\nsystemctl disable firewalld.service\n# 3. 清除防火墙策略\niptables -F\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_2-5-参数配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-参数配置"}},[this._v("#")]),this._v(" 2.5 参数配置")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi /etc/sysconfig/selinux\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("SELINUX=disabled\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo 0 > /proc/sys/vm/swappiness\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi /etc/sysctl.conf\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vm.swappiness=0\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd /usr/lib/tuned/\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('grep "vm.swappiness" * -R\n')])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi latency-performance/tuned.conf\n\nvi throughput-performance/tuned.conf\n\nvi virtual-guest/tuned.conf\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('grep "vm.swappiness" * -R\n')])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo never > /sys/kernel/mm/transparent_hugepage/defrag\necho never > /sys/kernel/mm/transparent_hugepage/enabled\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi /etc/rc.local\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("echo never > /sys/kernel/mm/transparent_hugepage/defrag\necho never > /sys/kernel/mm/transparent_hugepage/enabled\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("chmod +x /etc/rc.d/rc.local\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"_3-安装-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-mysql"}},[this._v("#")]),this._v(" 3. 安装 MySQL")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -qa | grep mariadb\nrpm -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64\nfind / -name mysql|xargs rm -rf\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd /mnt/install-tools/cdh/mysql-5.7\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm\nrpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm\nrpm -ivh mysql-community-libs-compat-5.7.26-1.el7.x86_64.rpm\nrpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm\nrpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("service mysqld start\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("service mysqld status\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cat /var/log/mysqld.log|grep 'A temporary password'\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mysql -uroot -piro5kMd2lg!:\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("ALTER USER 'root'@'localhost' IDENTIFIED BY 'Cdh6.2.0@centos7';\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("grant all privileges on *.* to 'root'@'%' identified by 'Cdh6.2.0@centos7' with grant option;\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("flush privileges;\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("create database cmf default charset utf8 collate utf8_general_ci;\ngrant all on cmf.* to 'cmf'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database amon default charset utf8 collate utf8_general_ci;\ngrant all on amon.* to 'amonuser'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database cmserver default charset utf8 collate utf8_general_ci;\ngrant all on cmserver.* to 'cmserveruser'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database hive default charset utf8 collate utf8_general_ci;\ngrant all on hive.* to 'hiveuser'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database rman default charset utf8 collate utf8_general_ci;\ngrant all on rman.* to 'rmanuser'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database oozie default charset utf8 collate utf8_general_ci;\ngrant all on oozie.* to 'oozieuser'@'%' identified by 'Cdh6.2.0@centos7';\n\ncreate database hue default charset utf8 collate utf8_general_ci;\ngrant all on hue.* to 'hueuser'@'%' identified by 'Cdh6.2.0@centos7';\n\nflush privileges;\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("show databases;\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("quit\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mysql --host=192.168.153.132 --port=3306 --user=root --password=Cdh6.2.0@centos7\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"_4-安装-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装-jdk"}},[this._v("#")]),this._v(" 4. 安装 JDK")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -qa | grep java\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.262.b10-1.el7.x86_64\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd /mnt/install-tools/cdh/cloudera-repos-6.2.0/agent\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -ivh oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("export JAVA_HOME=/usr/java/jdk1.8.0_181-cloudera\nexport CLASSPATH=$:CLASSPATH:$JAVA_HOME/lib/\nexport PATH=$PATH:$JAVA_HOME/bin\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("source /etc/profile\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("java -version\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"_5-cdh-安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-cdh-安装配置"}},[this._v("#")]),this._v(" 5. CDH 安装配置")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-1-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-安装"}},[this._v("#")]),this._v(" 5.1 安装")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("yum install -y redhat-lsb httpd mod_ssl openssl-devel python-psycopg2 MySQL-python libpq.so bind-utils libxslt cyrus-sasl-plain cyrus-sasl-gssapi fuse fuse-libs\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("rpm -ivh cloudera-manager-daemons-6.2.0-968826.el7.x86_64.rpm\nrpm -ivh cloudera-manager-server-6.2.0-968826.el7.x86_64.rpm\nrpm -ivh cloudera-manager-agent-6.2.0-968826.el7.x86_64.rpm\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vi /etc/cloudera-scm-agent/config.ini\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("server_host=cdh1  # 指向 server\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 进入编辑\nvi /etc/cloudera-scm-server/db.properties\n# 修改内容为\ncom.cloudera.cmf.db.type=mysql\ncom.cloudera.cmf.db.host=192.168.153.132:3306\ncom.cloudera.cmf.db.name=cmf\ncom.cloudera.cmf.db.user=cmf\ncom.cloudera.cmf.db.password=Cdh6.2.0@centos7\ncom.cloudera.cmf.db.setupType=EXTERNAL\n# 记得注释掉下边的 setupType\n# com.cloudera.cmf.db.setupType=INIT\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-2-部署-parcel-源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-部署-parcel-源"}},[this._v("#")]),this._v(" 5.2 部署 parcel 源")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("systemctl status httpd  # 查看状态\nsystemctl start httpd  # 启动\nsystemctl enable httpd.service  #设置 httpd 服务开机自启\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mkdir -p /usr/share/java  # cdh 默认搜索目录\n\ncd /usr/share/java\n\n# 上传 mysql-connector-java-5.1.47.tar.gz 文件\n\ntar -zxvf mysql-connector-java-5.1.47.tar.gz\n\ncd mysql-connector-java-5.1.47\n\ncp mysql-connector-java-5.1.47.jar /usr/share/java\n\ncd /usr/share/java\n\ncp mysql-connector-java-5.1.47.jar mysql-connector-java.jar  # 去掉版本号\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("mkdir -p /var/www/html/cdh6_parcel\nmv CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel /var/www/html/cdh6_parcel\nmv CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel.sha /var/www/html/cdh6_parcel\nmv manifest.json /var/www/html/cdh6_parcel\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-3-启动-server-和-agent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-启动-server-和-agent"}},[this._v("#")]),this._v(" 5.3 启动 server 和 agent")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("启动 server\nsystemctl start cloudera-scm-server\n重启 server\nsystemctl restart cloudera-scm-server\n停止 server\nsystemctl stop cloudera-scm-server\n查看日志，出现 mster started 说明启动成功\ntail -F /var/log/cloudera-scm-server/cloudera-scm-server.log -n 1000\ntail -F /var/log/cloudera-scm-agent/cloudera-scm-agent.log -n 1000\n查看状态\nsystemctl status cloudera-scm-server\n从节点启动 agent\nsystemctl start cloudera-scm-agent\nsystemctl restart cloudera-scm-agent\n停止 agent\nsystemctl stop cloudera-scm-agent\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("netstat -lnpt | grep 7180\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/sbin/iptables -I INPUT -p tcp --dport 7180 -j ACCEPT\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-4-访问监控台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-访问监控台"}},[this._v("#")]),this._v(" 5.4 访问监控台")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-5-配置服务节点访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-配置服务节点访问"}},[this._v("#")]),this._v(" 5.5 配置服务节点访问")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd /etc/nginx/conf.d\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vim hue.data.console.tmp.linesno.com.conf\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("server {\n    listen       80 ;\n    server_name  hue.data.lbxinhu.linesno.com;\n\n    location / {\n        # proxy_pass http://172.17.49.192:8889/ ;   #来自jsp请求交给tomcat处理\n        proxy_pass http://k8s-worker-01:8889/ ;\n        proxy_redirect off;\n        proxy_set_header Host $host;    #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        client_max_body_size 10m;   #允许客户端请求的最大单文件字节数\n        client_body_buffer_size 128k; #缓冲区代理缓冲用户端请求的最大字节数\n        proxy_connect_timeout 90;   #nginx跟后端服务器连接超时时间(代理连接超时)\n        proxy_read_timeout 90;      #连接成功后，后端服务器响应时间(代理接收超时)\n        proxy_buffer_size 4k;       #设置代理服务器（nginx）保存用户头信息的缓冲区大小\n        proxy_buffers 6 32k;        #proxy_buffers缓冲区，网页平均在32k以下的话，这样设置\n        proxy_busy_buffers_size 64k;#高负荷下缓冲大小（proxy_buffers*2）\n        proxy_temp_file_write_size 64k; #设定缓存文件夹大小，大于这个值，将从upstream服务器传\n    }\n\n}\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"_5-6-cdh-包含组件对应的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-cdh-包含组件对应的版本"}},[this._v("#")]),this._v(" 5.6 CDH 包含组件对应的版本")])},function(){var t=this._self._c;return t("h4",{attrs:{id:"_5-6-1-cdh-6-2-0-packaging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-1-cdh-6-2-0-packaging"}},[this._v("#")]),this._v(" 5.6.1 CDH 6.2.0 Packaging")])},function(){var t=this._self._c;return t("thead",[t("tr",[t("th",[t("strong",[this._v("Component")])]),this._v(" "),t("th",[t("strong",[this._v("Component Version")])]),this._v(" "),t("th",[t("strong",[this._v("Changes Information")])])])])},function(){var t=this._self._c;return t("tr",[t("td",[this._v("Kite SDK")]),this._v(" "),t("td",[this._v("1.0.0")]),this._v(" "),t("td")])}],!1,null,null,null);e.default=r.exports}}]);