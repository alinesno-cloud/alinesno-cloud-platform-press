(window.webpackJsonp=window.webpackJsonp||[]).push([[698],{926:function(s,t,a){"use strict";a.r(t);var e=a(0),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),t("p",[s._v("系统应用集成示例工程"),t("a",{attrs:{href:"https://gitee.com/alinesno-cloud/alinesno-demo-gateway-open/tree/master/demo-business-shop",target:"_blank",rel:"noopener noreferrer"}},[s._v("打开"),t("OutboundLink")],1)]),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),t("p",[s._v("服务器配置 docker-login，如下:")]),s._v(" "),s._m(7),s._m(8),s._v(" "),s._m(9),s._v(" "),s._m(10),s._m(11),s._v(" "),t("p",[s._v("这里主要集成的是 maven 打包插件，与 maven 工程整合构建打包")]),s._v(" "),s._m(12),s._v(" "),t("p",[s._v("前端工程打成容器镜像")]),s._v(" "),s._m(13),s._m(14),s._v(" "),s._m(15),s._v(" "),s._m(16)])}),[function(){var s=this._self._c;return s("h1",{attrs:{id:"容器化集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器化集成"}},[this._v("#")]),this._v(" 容器化集成")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"示例工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例工程"}},[this._v("#")]),this._v(" 示例工程")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var s=this._self._c;return s("ul",[s("li",[this._v("快速集成容器打包的方式和多种打包方式")]),this._v(" "),s("li",[this._v("前后端打包的方式")]),this._v(" "),s("li",[this._v("前端打包自定义后端域名方式")]),this._v(" "),s("li",[this._v("容器上传镜像中心方式")])])},function(){var s=this._self._c;return s("h2",{attrs:{id:"服务工程容器化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务工程容器化"}},[this._v("#")]),this._v(" 服务工程容器化")])},function(){var s=this._self._c;return s("p",[this._v("这里主要是集成"),s("code",[this._v("jib-maven-plugin")]),this._v("插件，集成的是阿里云镜像仓库")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"配置服务器镜像认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器镜像认证"}},[this._v("#")]),this._v(" 配置服务器镜像认证")])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_USERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login --username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGISTRY_USERNAME")]),s._v(" --password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGISTRY_PASSWORD")]),s._v(" registry.cn-shenzhen.aliyuncs.com\n")])])])},function(){var s=this._self._c;return s("h3",{attrs:{id:"容器化打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器化打包"}},[this._v("#")]),this._v(" 容器化打包")])},function(){var s=this._self._c;return s("blockquote",[s("p",[this._v("账号名密码可以使用 jenkinsfile 自定义配置，这里做了显示配置，不太安全，例子待补充")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 环境变量配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("projectName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alinesno-cloud-demo-boot\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义镜像创建和认证")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DOCKER_REGISTRY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("registry.cn-shenzhen.aliyuncs.com\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_NAMESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alinesno-cloud-incubator\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_USERNAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\nmvn -B -U -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${projectName}")]),s._v("/pom.xml "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" package\nmvn -B -U -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${projectName}")]),s._v("/pom.xml clean compile jib:build -Ddocker.registry.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${REGISTRY_NAMESPACE}")]),s._v(" -Djib.to.auth.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${REGISTRY_USERNAME}")]),s._v("  -Djib.to.auth.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${REGISTRY_PASSWORD}")]),s._v("\n")])])])},function(){var s=this._self._c;return s("h2",{attrs:{id:"前端工程容器化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工程容器化"}},[this._v("#")]),this._v(" 前端工程容器化")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"前端工程打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工程打包"}},[this._v("#")]),this._v(" 前端工程打包")])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("projectName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alinesno-cloud-demo-ui\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像构建设置变量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("docker_repostory")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("registry.cn-shenzhen.aliyuncs.com\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("docker_registry_name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alinesno-cloud-incubator\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project_artifactid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alinesno-cloud-demo-ui\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("project_version")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v(".2-RC\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${projectName}")]),s._v("/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${projectName}")]),s._v("/docker/build-docker.sh\n")])])])},function(){var s=this._self._c;return s("p",[this._v("其它"),s("code",[this._v("build-docker.sh")]),this._v("请查看示例工程")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[this._v("#")]),this._v(" 其它")])},function(){var s=this._self._c;return s("ul",[s("li",[this._v("无")])])}],!1,null,null,null);t.default=r.exports}}]);