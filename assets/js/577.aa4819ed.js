(window.webpackJsonp=window.webpackJsonp||[]).push([[577],{803:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("相对来说，一个工程基础的用户、权限、菜单等基础的功能都是固定的，开发只需要根据需求开发相当的业务系统即可，\n并不需要关注太多，所以此平台对于开发来说，只需要一个所开发的应用账号权限即可")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),a("p",[t._v("在操作记录中查询即可，如:")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),a("p",[t._v("采用分布式日志前置条件:")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),a("p",[t._v("应用系统添加日志依赖包:")]),t._v(" "),t._m(16),a("p",[t._v("应用启动过程中，会自动将日志发到对应的 elk 系统中，在 elk 系统查看,如图:")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/technique/kibana_01.jpeg")}}),t._v(" "),a("p",[t._v("此处日志配置完成")])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"日志处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志处理"}},[this._v("#")]),this._v(" 日志处理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("服务日志配置,一般此应用于小型项目中,大小型项目不太建议")]),this._v(" "),s("li",[this._v("分布式日志配置,一般此应用于大中型项目当中，小型项目不太建议")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"日志集成方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志集成方式"}},[this._v("#")]),this._v(" 日志集成方式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"服务日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务日志配置"}},[this._v("#")]),this._v(" 服务日志配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("此为单个应用日志配置，默认的日志配置如下，日志保存在当前用户"),s("code",[this._v("alinesno-running-log")]),this._v("目录下，且日志名称为应用名称,默认保存天数\n为 30 天")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user.home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/alinesno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("log/$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("spring.application.name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(".log\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("root")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" info\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("com.alinesno.cloud")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" debug\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("添加用户操作日志，在 controller 方法上添加注解"),s("code",[this._v("Accountrecord")]),this._v("，记录用户操作日志，如:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AccountRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RecordType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ACCESS_ADD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("save"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/add"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:"/images/kibana_02.png",width:"100%"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"分布式日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分布式日志配置"}},[this._v("#")]),this._v(" 分布式日志配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("暂时不推荐(切换到 kafka 当中)，以下方案暂时丢弃")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("配置 elk 系统")]),this._v(" "),s("li",[this._v("在 logback-spring.xml 中配置好 logstash 的 IP 配置")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当前的分布式日志采用"),s("code",[this._v("elk")]),this._v("采集，整个结构日志结构如下:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("图后补")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[this._v("Spring boot -> logback -> Tcp/IP -> logstash -> elasticsearch\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alinesno.cloud.monitor.agent"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("alinesno-cloud-monitor-agent"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.0.0-SNAPSHOT"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);