(window.webpackJsonp=window.webpackJsonp||[]).push([[641],{869:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),a("dependency",[a("groupId",[t._v("com.xuxueli")]),t._v(" "),a("artifactId",[t._v("xxl-conf-core")]),t._v(" "),a("version",[t._v("{最新稳定版}")])],1),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("可参考配置文件：")]),t._v(" "),t._m(5),t._m(6),t._v(" "),a("p",[t._v('XXL-CONF 提供多种配置方式，包括 "API、 @XxlConf、XML" 等多种配置方式，介绍如下。')]),t._v(" "),a("p",[t._v('可参考项目 "xxl-conf-sample-spring"（接入 XXl-CONF 的示例项目，供用户参考学习），代码位置：com.xxl.conf.sample.controller.IndexController.index()')]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v('参考 "IndexController" 代码如下：')]),t._v(" "),a("p",[t._v('String paramByApi = XxlConfClient.get("default.key01", null);\n用法：代码中直接调用 API 即可，示例代码 ""XxlConfClient.get("key", null)"";\n优点：\n配置从配置中心自动加载；\n存在 LocalCache，不用担心性能问题；\n支持动态推送更新；\n支持多数据类型；')]),t._v(" "),t._m(8),t._v(" "),a("p",[t._v('参考 "DemoConf.paramByAnno" 属性配置；示例代码')]),t._v(" "),t._m(9),a("p",[t._v('用法：对象 Field 上加注解 ""@XxlConf("key")"，支持设置默认值，支持设置是否开启动态刷新；')]),t._v(" "),a("p",[t._v('优点：\n配置从配置中心自动加载；\n存在 LocalCache，不用担心性能问题；\n支持动态推送更新；\n支持设置配置默认值；\n可配置是否开启 "动态推送更新";')]),t._v(" "),t._m(10),t._m(11),t._v(" "),a("p",[t._v('参考 "applicationcontext-xxl-conf.xml" 中 "DemoConf.paramByXml" 属性配置；示例代码如下：')]),t._v(" "),t._m(12),a("p",[t._v('用法：占位符方式 "$XxlConf{key}"；')]),t._v(" "),a("p",[t._v("优点：\n配置从配置中心自动加载；\n存在 LocalCache，不用担心性能问题；\n支持动态推送更新；")]),t._v(" "),t._m(13),t._v(" "),a("p",[t._v("参考如下代码：")]),t._v(" "),t._m(14),a("p",[t._v("用法：占位符方式 \"#{T(com.xxl.conf.core.XxlConfClient).get('key')}\"；")]),t._v(" "),a("p",[t._v('优点：\n配置从配置中心自动加载；\n存在 LocalCache，不用担心性能问题；\n兼容性好：在一些特殊的 XML 配置加载场景，如 "XML 构造器传参"、"自定义 spring 的 schema/xsd" ，上述几种方式不适用，此时可以考虑这种方式，兼容各种场景格式；')]),t._v(" "),a("p",[t._v("缺点：\n不支持动态推送更新；")]),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("可开发 Listener 逻辑，监听配置变更事件；可据此实现动态刷新 JDBC 连接池等高级功能；")]),t._v(" "),a("p",[t._v('参考 "IndexController" 代码如下：')]),t._v(" "),t._m(16)],1)}),[function(){var t=this._self._c;return t("h1",{attrs:{id:"使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[this._v("#")]),this._v(" 使用方式")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"中央仓库地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#中央仓库地址"}},[this._v("#")]),this._v(" 中央仓库地址")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.xuxueli"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("xxl-conf-core"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{最新稳定版}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this._self._c;return t("h4",{attrs:{id:"引入-maven-依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引入-maven-依赖"}},[this._v("#")]),this._v(" 引入 maven 依赖")])},function(){var t=this._self._c;return t("h4",{attrs:{id:"添加“xxl-conf-配置信息”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加“xxl-conf-配置信息”"}},[this._v("#")]),this._v(" 添加“XXL-CONF 配置信息”")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[t._v("/xxl-conf/xxl-conf-samples/xxl-conf-sample-springboot/src/main/resources/application.properties\n配置项说明\n\n 配置中心跟地址，必填；\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.conf.admin.address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http://localhost:8080/xxl-conf-admin")]),t._v('\n\n 环境配置，必填；如"test、ppe、product"等，指定配置加载环境；\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.conf.env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("test")]),t._v("\n\n 配置中心接入验证TOKEN，选填，非空时启用，进行安全严重\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.conf.access.token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("\n\n 配置快照文件地址，必填；会周期性缓存到本地快照文件中，当从配置中心获取配置失败时，将会使用使用本地快照文件中的配置数据；提高系统可用性；\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.conf.mirrorfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/data/applogs/xxl-conf/xxl-conf-mirror-sample.properties")]),t._v("\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"客户端配置获取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端配置获取"}},[this._v("#")]),this._v(" 客户端配置获取")])},function(){var t=this._self._c;return t("h4",{attrs:{id:"方式-1-api-方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式-1-api-方式"}},[this._v("#")]),this._v(" 方式 1: API 方式")])},function(){var t=this._self._c;return t("h4",{attrs:{id:"方式-2-xxlconf-注解方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式-2-xxlconf-注解方式"}},[this._v("#")]),this._v(" 方式 2: @XxlConf 注解方式")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@XxlConf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default.key02"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" paramByAnno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[this._v("“"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[this._v("@XxlConf")]),this._v("”注解属性\t说明\nvalue\t配置"),t("span",{pre:!0,attrs:{class:"token class-name"}},[this._v("Key")]),this._v("\ndefaultValue\t配置为空时的默认值\ncallback\t配置更新时，是否需要同步刷新配置\n")])])])},function(){var t=this._self._c;return t("h4",{attrs:{id:"方式-3-xml-占位符方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式-3-xml-占位符方式"}},[this._v("#")]),this._v(" 方式 3: XML 占位符方式")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("demoConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.xxl.conf.sample.demo.DemoConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("paramByXml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$XxlConf{default.key03}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this._self._c;return t("h4",{attrs:{id:"方式-4-xml-api-混合方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式-4-xml-api-混合方式"}},[this._v("#")]),this._v(' 方式 4: "XML + API" 混合方式')])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("demoConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.xxl.conf.sample.demo.DemoConf2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constructor-arg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("#{T(com.xxl.conf.core.XxlConfClient).get("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(")}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("paramByXml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("#{T(com.xxl.conf.core.XxlConfClient).get("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("default.key03"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(")}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this._self._c;return t("h4",{attrs:{id:"其他方式-配置变更监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他方式-配置变更监听"}},[this._v("#")]),this._v(" 其他方式: 配置变更监听")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlConfClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default.key01"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XxlConfListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"配置变更事件通知：{}={}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])}],!1,null,null,null);a.default=e.exports}}]);