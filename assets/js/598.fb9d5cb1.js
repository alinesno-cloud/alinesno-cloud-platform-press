(window.webpackJsonp=window.webpackJsonp||[]).push([[598],{826:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("相对来说，一个工程基础的用户、权限、菜单等基础的功能都是固定的，开发只需要根据需求开发相当的业务系统即可，\n并不需要关注太多，所以此平台对于开发来说，只需要一个所开发的应用账号权限即可")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),s("p",[t._v("在操作记录中查询即可，如:")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("采用分布式日志前置条件:")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),s("p",[t._v("应用系统添加日志依赖包:")]),t._v(" "),t._m(16),s("p",[t._v("应用启动过程中，会自动将日志发到对应的 elk 系统中，在 elk 系统查看,如图:")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/technique/kibana_01.jpeg")}}),t._v(" "),s("p",[t._v("此处日志配置完成")])])}),[function(){var t=this._self._c;return t("h1",{attrs:{id:"日志处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志处理"}},[this._v("#")]),this._v(" 日志处理")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"本内容你将获得"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var t=this._self._c;return t("ul",[t("li",[this._v("服务日志配置,一般此应用于小型项目中,大小型项目不太建议")]),this._v(" "),t("li",[this._v("分布式日志配置,一般此应用于大中型项目当中，小型项目不太建议")])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"日志集成方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志集成方式"}},[this._v("#")]),this._v(" 日志集成方式")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"服务日志配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务日志配置"}},[this._v("#")]),this._v(" 服务日志配置")])},function(){var t=this._self._c;return t("p",[this._v("此为单个应用日志配置，默认的日志配置如下，日志保存在当前用户"),t("code",[this._v("alinesno-running-log")]),this._v("目录下，且日志名称为应用名称,默认保存天数\n为 30 天")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user.home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/alinesno"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("log/$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("spring.application.name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(".log\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" info\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("com.alinesno.cloud")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" debug\n")])])])},function(){var t=this._self._c;return t("p",[this._v("添加用户操作日志，在 controller 方法上添加注解"),t("code",[this._v("Accountrecord")]),this._v("，记录用户操作日志，如:")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AccountRecord")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RecordType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ACCESS_ADD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FormToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("save"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/add"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this._self._c;return t("p",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:"/images/kibana_02.png",width:"100%"}})])},function(){var t=this._self._c;return t("h3",{attrs:{id:"分布式日志配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分布式日志配置"}},[this._v("#")]),this._v(" 分布式日志配置")])},function(){var t=this._self._c;return t("blockquote",[t("p",[this._v("暂时不推荐(切换到 kafka 当中)，以下方案暂时丢弃")])])},function(){var t=this._self._c;return t("ul",[t("li",[this._v("配置 elk 系统")]),this._v(" "),t("li",[this._v("在 logback-spring.xml 中配置好 logstash 的 IP 配置")])])},function(){var t=this._self._c;return t("p",[this._v("当前的分布式日志采用"),t("code",[this._v("elk")]),this._v("采集，整个结构日志结构如下:")])},function(){var t=this._self._c;return t("blockquote",[t("p",[this._v("图后补")])])},function(){var t=this._self._c;return t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[this._v("Spring boot -> logback -> Tcp/IP -> logstash -> elasticsearch\n")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alinesno.cloud.monitor.agent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("alinesno-cloud-monitor-agent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.0.0-SNAPSHOT"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);