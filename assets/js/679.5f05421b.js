(window.webpackJsonp=window.webpackJsonp||[]).push([[679],{905:function(t,s,a){"use strict";a.r(s);var e=a(0),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("系统应用集成示例工程"),a("a",{attrs:{href:"https://gitee.com/alinesno-cloud/alinesno-demo-gateway-open/tree/master/demo-business-shop",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开"),a("OutboundLink")],1)]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("服务器配置 docker-login，如下:")]),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),a("p",[t._v("这里主要集成的是 maven 打包插件，与 maven 工程整合构建打包")]),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("前端工程打成容器镜像")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16)])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"容器化集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器化集成"}},[this._v("#")]),this._v(" 容器化集成")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"示例工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例工程"}},[this._v("#")]),this._v(" 示例工程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("快速集成容器打包的方式和多种打包方式")]),this._v(" "),s("li",[this._v("前后端打包的方式")]),this._v(" "),s("li",[this._v("前端打包自定义后端域名方式")]),this._v(" "),s("li",[this._v("容器上传镜像中心方式")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"服务工程容器化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务工程容器化"}},[this._v("#")]),this._v(" 服务工程容器化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这里主要是集成"),s("code",[this._v("jib-maven-plugin")]),this._v("插件，集成的是阿里云镜像仓库")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"配置服务器镜像认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器镜像认证"}},[this._v("#")]),this._v(" 配置服务器镜像认证")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTRY_USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTRY_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" login --username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$REGISTRY_USERNAME")]),t._v(" --password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$REGISTRY_PASSWORD")]),t._v(" registry.cn-shenzhen.aliyuncs.com\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"容器化打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器化打包"}},[this._v("#")]),this._v(" 容器化打包")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("账号名密码可以使用 jenkinsfile 自定义配置，这里做了显示配置，不太安全，例子待补充")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 环境变量配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("projectName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alinesno-cloud-demo-boot\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义镜像创建和认证")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DOCKER_REGISTRY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("registry.cn-shenzhen.aliyuncs.com\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTRY_NAMESPACE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alinesno-cloud-incubator\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTRY_USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("REGISTRY_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n\nmvn -B -U -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${projectName}")]),t._v("/pom.xml "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" package\nmvn -B -U -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${projectName}")]),t._v("/pom.xml clean compile jib:build -Ddocker.registry.name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${REGISTRY_NAMESPACE}")]),t._v(" -Djib.to.auth.username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${REGISTRY_USERNAME}")]),t._v("  -Djib.to.auth.password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${REGISTRY_PASSWORD}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"前端工程容器化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工程容器化"}},[this._v("#")]),this._v(" 前端工程容器化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"前端工程打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工程打包"}},[this._v("#")]),this._v(" 前端工程打包")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("projectName")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alinesno-cloud-demo-ui\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像构建设置变量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("docker_repostory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("registry.cn-shenzhen.aliyuncs.com\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("docker_registry_name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alinesno-cloud-incubator\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("project_artifactid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alinesno-cloud-demo-ui\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("project_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.1")]),t._v(".2-RC\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${projectName}")]),t._v("/docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${projectName}")]),t._v("/docker/build-docker.sh\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其它"),s("code",[this._v("build-docker.sh")]),this._v("请查看示例工程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"其它"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[this._v("#")]),this._v(" 其它")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("无")])])}],!1,null,null,null);s.default=r.exports}}]);