(window.webpackJsonp=window.webpackJsonp||[]).push([[411],{638:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){this._self._c;return this._m(0)}),[function(){var s=this,a=s._self._c;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"mariadb-网络安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mariadb-网络安装"}},[s._v("#")]),s._v(" MariaDB 网络安装")]),s._v(" "),a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),a("ol",[a("li",[s._v("假设安装的服务器为:123.1.1.1")])]),s._v(" "),a("p",[a("strong",[s._v("采购了百度云服务器，发现，体验太差了，推荐还是阿里云")])]),s._v(" "),a("h2",{attrs:{id:"安装-mariadb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-mariadb"}},[s._v("#")]),s._v(" 安装 MariaDB")]),s._v(" "),a("blockquote",[a("p",[s._v("安装过程使用 root 操作")])]),s._v(" "),a("p",[s._v("安装依赖软件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y cmake , "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" , gcc , gcc-c++ , bison , ncurses , ncurses-devel\n")])])]),a("p",[s._v("添加库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/yum.repos.d/MariaDB.repo\n")])])]),a("p",[s._v("添加数据源")]),s._v(" "),a("blockquote",[a("p",[s._v("系统及版本选择：https://downloads.mariadb.org/mariadb/repositories/#mirror=tuna")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MariaDB 10.3 CentOS repository list - created 2019-03-29 02:33 UTC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://downloads.mariadb.org/mariadb/repositories/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MariaDB\nbaseurl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" http://yum.mariadb.org/10.3/centos7-amd64\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("清理 yum 缓存")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum clean headers  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清理/var/cache/yum的headers")]),s._v("\nyum clean packages "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清理/var/cache/yum下的软件包")]),s._v("\nyum clean metadata\n\nyum clean all   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清除Yum缓存")]),s._v("\nyum makecache   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把服务器的包信息下载到本地电脑缓存起来")]),s._v("\nyum update   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#升级包同时也升级软件和系统内核")]),s._v("\n")])])]),a("p",[s._v("释放内存")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /proc/sys/vm/drop_caches\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /proc/sys/vm/drop_caches\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" -m    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看内存")]),s._v("\n")])])]),a("p",[s._v("安装 mariadb")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" MariaDB-server MariaDB-client\n")])])]),a("p",[s._v("启动数据库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart mariadb\nsystemctl status mariadb\n")])])]),a("p",[s._v("假如密码忘记:\n修改/etc/my.cnf 文件,在[mysqld]下添加 skip-grant-tables , 再启动 mariadb")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client-server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [mysqld]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# skip-grant-tables")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include all files from the config directory")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("includedir /etc/my.cnf.d\n")])])]),a("p",[s._v("登陆")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql\n\n// 安全配置\nmysql_secure_installation\n")])])]),a("p",[s._v("添加防火墙")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" firewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --permanent --add-service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart firewalld\n")])])]),a("p",[s._v("重置密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// 重启服务\nsystemctl restart mysqld\nsystemctl status mysqld\n")])])]),a("p",[s._v("重置密码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql -uroot -p\nuse mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HouGuiYu@123!@#'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("开启远程访问")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql -uroot -p\n\n// %表示是所有的外部机器，如果指定某一台机，就将%改为相应的机器名；‘root’则是指要使用的用户名\ngrant all privileges on *.* to "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HouGuiYu@123!@#'")]),s._v(" with grant option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n// 运行此句才生效，或者重启MySQL\nflush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"安装-phpadmin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-phpadmin"}},[s._v("#")]),s._v(" 安装 phpadmin")]),s._v(" "),a("blockquote",[a("p",[s._v("mysql 的界面管理工具，用于 mysql 的可视化管理")])]),s._v(" "),a("ol",[a("li",[s._v("安装依赖包")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpd php php-fpm php-mysql\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("升级 php")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh https://mirror.webtatic.com/yum/el7/epel-release.rpm "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新源")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\nyum remove php-common -y  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#移除系统自带的php-common")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y php72w php72w-opcache php72w-xml php72w-mcrypt php72w-gd php72w-devel php72w-mysql php72w-intl php72w-mbstring  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装依赖包")]),s._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("安装 apache")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// 安装\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpd\n\n// 重启\nsystemctl restart httpd\n\n// 查看运行状态\nsystemctl status httpd\n")])])]),a("p",[s._v("访问地址:http://123.1.1.1/")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("安装 phpadmin")])]),s._v(" "),a("blockquote",[a("p",[s._v("此需进入目录 /var/www/html 目录操作")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// 下载phpadmin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://files.phpmyadmin.net/phpMyAdmin/4.8.5/phpMyAdmin-4.8.5-all-languages.zip\n\n// 解压\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" phpMyAdmin-4.8.5-all-languages.zip\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("修改名称")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" phpMyAdmin-4.8.5-all-languages phpMyAdmin\n")])])])])}],!1,null,null,null);a.default=n.exports}}]);