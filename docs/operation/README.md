# 部署内容

## 概要

基础环境完善及配置，为整个开发平台做基础，以环境搭建为主,为本地开发环境，
目前的服务器应该是不够的,也并不是代表所有的软件需要完善才可以进入下一步开发，比如 elk，前期搭建并一定是需要的，

比如说集群，也并不一定是一开始就是集群,
平台搭建一个人的话是比较长期，所以，以先投入组件构建为主，在完成第一步之后，再进一步完善，
即使在团队，也是如此建议，一步到位，也是比较难的，如果可以就更好。

## 开发环境

- MacPro_x64_16g_256g(SSD)

## 服务器资源

> 阿里云服务器 IP 为公网

| 序号 | 作用               | 服务器资源(系统/内存/硬盘) | IP 规划    | 备注 |
| :--: | ------------------ | -------------------------- | ---------- | ---- |
|  1   | 开发服务器\_master | CentOS7.x_x64_16G_40G      | 阿里云分配 |      |
|  2   | 基础 DevOps 平台   | CentOS7.x_x64_4G_40G       | 阿里云分配 |      |
|  3   | 注册中心           | CentOS7.x_x64_4G_40G       | 阿里云分配 | .    |

<!-- | 2    | 开发服务器_slave  | CentOS7.4_x64_2G_16G       | 192.168.1.111 | VBox虚拟机 | -->
<!-- | 3    | 开发服务器_slave  | CentOS7.4_x64_2G_16G       | 192.168.1.112 | VBox虚拟机 | -->
<!-- | 4    | 监控运维平台      | CentOS7.4_x64_4G_16G       | 192.168.1.119 | VBox虚拟机 | -->
<!-- | 7    | 基础服务服务器    | CentOS7.4_x64_1G_40G       | 172.18.11.241 | 阿里云     | -->
<!-- | 8    | 业务服务服务器    | CentOS7.4_x64_1G_40G       | 172.18.11.183 | 阿里云     | -->
<!-- | 9    | 应用服务服务器    | CentOS7.4_x64_1G_40G       | 172.18.11.130 | 阿里云     | -->

## 资源规划

> 此处的完善进度表示文档完成进度,即可根据文档查询搭建的

| 序号 | 说明               | 工具          | 文档完善进度 | 备注             |
| :--: | ------------------ | ------------- | ------------ | ---------------- |
|  1   | 基础环境           | JDK           | 已完善       |                  |
|  2   | 反向代理           | Nginx/Kong    | 已完善       |                  |
|  3   | 高可用             | KeepAlived    |              |                  |
|  4   | 自动部署工具       | Jenkins       | 完善中       |                  |
|  5   | 私服库             | Nexus         | 已完善       |                  |
|  6   | 链接跟踪           | zipkin        |              |                  |
|  7   | 代码检测           | Sonar         |              |                  |
|  8   | 缓存工具           | Redis         | 已完善       |                  |
|  9   | 消息列表           | Kafka         | 已完善       |                  |
|  10  | 分布式注册中心     | zeekeeper     | 完善中       |                  |
|  11  | 分布式注册中心     | DubboAdmin    |              |                  |
|  12  | 分布式配置中心     | Apollo        |              | 换成自研配置中心 |
|  13  | 数据库             | MySQL         | 已完善       |                  |
|  14  | 开发过程管理       | 禅道          |              |                  |
|  15  | ~~Redis 监控工具~~ | Redmon        |              |                  |
|  16  | 消息管理工具       | Kafka-Manager |              |                  |
|  17  | 数据库主从         | MyCAT         |              |                  |
|  18  | 容器管理           | Kubernetes    |              |                  |
|  19  | 镜像管理           | Harbor        |              |                  |
|  20  | 自动部署           | Ansible       |              |                  |
|  21  | ~~自动部署管理~~   | Ansible Tower |              | 版权问题         |
|  22  | ~~链接跟踪~~       | pinpoint      |              | 重复             |
|  23  | 日志监控           | elk           |              |                  |
|  24  | 服务器监控         | Zabbix        |              | .                |

<!-- | 20   | 基础环境搭建      | docker-compose | 完善中       |                  | -->

## 其它

- 略

<!-- # 访问地址 -->
<!-- | 序号 | 说明           | 地址                 | 备注 | -->
<!-- |:------|----------------|----------------------|------| -->
<!-- | 1    | 开发过程管理   | http://www.baidu.com |      | -->
<!-- | 2    | 缓存工具       |                      |      | -->
<!-- | 3    | Redis监控工具  |                      |      | -->
<!-- | 4    | 消息列表       |                      |      | -->
<!-- | 5    | 消息管理工具   |                      |      | -->
<!-- | 6    | 数据库         |                      |      | -->
<!-- | 7    | 数据库主从     |                      |      | -->
<!-- | 7    | 容器管理       |                      |      | -->
<!-- | 8    | 反向代理       |                      |      | -->
<!-- | 9    | 高可用         |                      |      | -->
<!-- | 10   | 分布式注册中心 |                      |      | -->
<!-- | 11   | 自动部署工具   |                      |      | -->
<!-- | 12   | 私服库         |                      |      | -->
<!-- | 13   | 代码检测       |                      |      | -->
<!-- | 14   | 镜像管理       |                      |      | -->
<!-- | 15   | 自动部署       |                      |      | -->
<!-- | 16   | 自动部署管理   |                      |      | -->
<!-- | 17   | 链接跟踪       |                      |      | -->
<!-- | 18   | 日志监控       |                      |      | -->
<!-- | 19   | 服务器监控     |                      |      | -->

<!-- # 混合云环境搭建 -->

<!-- > 原文链接: [https://zhuanlan.zhihu.com/p/473014155](https://zhuanlan.zhihu.com/p/473014155) -->

<!-- ## 概述 -->

<!-- 以下为个人学习环境搭建和多年积累经验。 -->

<!-- 接触软件开发环境从大学到现在差不多 10 年这样，这个过程不管是在自己学习的环境还有电脑等等都积累了大量的学习材料和资料，包括软件安装等大量的库存，这些材料当前基本上目前的环境是无法满足学习和进一步提升的要求点，考虑左右，综合各个成本点，搭建一套可以满足自己未来 4 年左右的学习环境。 -->

<!-- #### 整体阐述从以下思路进行阐述： -->

<!-- - 为什么要搭建个人学习环境 -->
<!-- - 学习环境需要搭建哪些东西 -->
<!-- - 怎么结合自动化运维来管理环境 -->
<!-- - 这套环境搭建的成本是怎么样的 -->

<!-- ## 为什么要搭建个人学习环境 -->

<!-- > 这个是一个过程中多次遇到的痛苦，迁移，丢失，迁移，丢失 … 以前代码仓库是放在阿里 svn 库，但是它一停，就没了 … -->

<!-- ### 1、学习环境的限制 -->

<!-- #### 收费项目太多： -->

<!-- 代码仓库的会员收费，运维告警的会员收费，在线流程图的收费，Git 存储会员升级的收费，网盘资料大小限制，下载收费等等多种收费项目太多，转移过多次，成本太高； -->

<!-- #### 资料长期的沉淀： -->

<!-- 平时学习的项目，脚本，代码很多，这些一记录久了就慢慢变成一套东西，每一个技术的学习就会有一个例子，深入学习这个例子又丰富，还有各种 github 仓库的学习，修改还有笔记，10 年下来，这些资料已经有上百个 git 仓库，十几 G 的项目代码，mysql 数据库就有上百个，有些脚本也找不到了； -->

<!-- <img src="https://pic1.zhimg.com/80/v2-2b56a7f8562a96cb4999aabdc043d254_720w.jpg"> -->

<!-- #### 网络速度的限制： -->

<!-- 自己验证安装过的软件库，也有近上百个，哪个可以使用，哪个不可以使用，另一个是下载的限制，每次下载大的软件都需要开通会员，速度极慢，影响学习环境和心情； -->

<!-- <img src="https://pic4.zhimg.com/80/v2-0b59ff8edd233b626acd21fff748e92b_720w.jpg"> -->

<!-- #### 开发环境的限制： -->

<!-- 我需要运行学习的项目，需要收集他们在网络运行的数据，需要计算大数据，需要利用大数据进行一些分析学习，开始阿里云，aws，oracle cloud 等等免费的，但是发现这些限制只要想多加一点东西，硬盘就说不行，费用就需要添加，开始也不断的加，开始 1k、2k、3k … 整合下来，一年的成本就是基本上过万了，过了两三年，这些服务器就不可用，数据又需要重新迁移，每次迁移的周期成本极高； -->

<!-- <img src="https://pic3.zhimg.com/80/v2-6220fb115d7e8636ccd6d8ff22bed286_720w.jpg"> -->

<!-- ### 2、个人多年学习管理的丢失 -->

<!-- #### 过程笔记的丢失： -->

<!-- 以前使用 163 博客，lofter 博客等这些网络工具，后面印象笔记，再到有道笔记，最后发现这些笔记限制性大，另一个是博客的关闭，另一个是个性化的要求无法满足，最后使用了 wordpress 博客，一使用就是近乎 8~9 年，保存了我很多的历史笔记和记录，包括一些心得点，但是场景不能满足，比如在跟开源团队讨论会议的时候，做的笔记记录，又是放在 gitee 或者 github 上面，久了，不维护之后，原来的记录又很难找到。 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-df4b7527c80c602f5856c61122e3ddd2_720w.jpg"> -->

<!-- #### 成长管理计划的丢失： -->

<!-- 每年事情都会有一个计划，自己每学习一样东西或者跟别人沟通的时候，都会有计划和图形规划，存在着大量的草图和自我管理过程，开始使用的是笔记本画草图，另一个是使用 visio，再到其它的画图工具，然后计划使用 gitbook 和 markdown，再到 docsify 等工具，最后再到 vuepress，管理工具也由禅道、jira 都使用，这些自己过程和记录，笔记本有可能丢失或者换一本就没有了，原来考虑过 iPad，但是效果也不理想。另一个是电脑格式化，或者每 3~5 年一换，资料都有损失，大量的 xmind 导图不再找到。 -->

<!-- <img src="https://pic1.zhimg.com/80/v2-9d4efd70ad3908433d3af890b62f252c_720w.jpg"> -->

<!-- #### 个人时间的无形流失： -->

<!-- 不管是资料还有环境，还有网络，还有各种切换过程中，学习材料 的流失，每次都需要重新再做一次，做的速度可能会更快了，但是无形之中，时间的流失，比如每切换一个电脑需要至少 7 天的环境适配，资料适配，每迁移一次数据环境，至少需要 3 天的导入导出，还有验证是否正常，每一次笔记的迁移，至少需要 2~3 天的迁移，包括图片，材料还有环境的准备等，而且这个过程，需要使用的服务，又需要重新的付费，这些周期整合下来，个人时间在无形当中消耗，同步还有初始过程的时间等。 -->

<!-- ## 个人学习需要搭建哪些东西 -->

<!-- > 以前是 ssh(ssm)，再后来是 devops，再到后来是微服务，中台，物联网，大数据 AI .. 技术不断提高要求，传统的编程已经很难了 -->

<!-- #### 1、规划我的学习目标 -->

<!-- 在当前数字化、中台、物联网等，还有人工智能成熟的情况下，其它的 AR，元宇宙等在不断的研发下，会不会下一个 5 年的突破，不知道，但是后面肯定又会有新的革新技术。搭建的环境为了数字化下的沉淀，包括主要以下几个点： -->

<!-- - 建立技术/研发/业务中台与业务 -->
<!-- - 建立数据中心和大数据计算分析 -->
<!-- - 建立物联网服务进行物联网互联 -->

<!-- 同步也会结合机器学习和人工智能场景，但是这个是在上面的环境进行，自己这里定义，机器学习属于大数据场景，人工智能属于业务中台场景。 -->

<!-- <img src="https://pic4.zhimg.com/80/v2-db1b7669fff441bf5940ad0e9c30fa83_720w.jpg"> -->

<!-- #### 2、服务器资源环境规划 -->

<!-- 这里规划的资源相对比较多，同时由于个人原因，分几个角度考虑，采购云服务器至少 3 年以上服务器，长久的云服务器至少 10 年以上，域名大概是 10 年以上，硬件服务器至少可用 5 年以上，需要保存的长久的资料和短期的资料就比较明确，同步是备份服务器分多地和稳定云盘，确保数据的不丢失，采购的整体计算资源： -->

<!-- CPU40 核 500 多 G 内存 10TB 的算力和资源阿里云服务器、塔式服务器、MacPro 等 -->

<!-- <img src="https://pic4.zhimg.com/80/v2-d4362fbafa09b05fa71644eb699de9a7_720w.jpg"> -->

<!-- 规划了几个区域如下： -->

<!-- - 个人区：个人使用的 -->
<!-- - 网络区（中转区）：方便公网的访问使用 -->
<!-- - 内网区（安全区）：方便数据存储和重要资源 -->
<!-- - 备份区（安全区）：数据存储和恢复 -->

<!-- #### 个人区： -->

<!-- 主要针对的是自己个人 PC 使用的，还有移动网络等便利的情况下使用 -->

<!-- <img src="https://pic1.zhimg.com/80/v2-1193ebf91898ddf717c3651c44ac8278_720w.jpg"> -->

<!-- #### 网络区： -->

<!-- 主要是针对于公网部分的应用和数据，方便自己随时访问，比如放博客，放一些公共的环境元素，追求访问的速度 -->

<!-- > 阿里云服务器是刚好 21 年双 11 活动采购的，相对比较划算 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-3e7c027ee5911689280b17ce26a6d55a_720w.jpg"> -->

<!-- #### 内网区： -->

<!-- 内网区的建设主要针对于大数据存储使用，外网的磁盘和资源采购费用高，所以规划在内网区，追求稳定性 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-bd3fc7cc22d70a773a319f43f239555e_720w.jpg"> -->

<!-- #### 备份区： -->

<!-- 这部分主要利用公网第三方云平台，进行的数据备份和管理，或者分享等，比如 github、网盘、海外区域等 -->

<!-- <img src="https://pic4.zhimg.com/80/v2-4d2b53e9159c857e47825c70d5020fb3_720w.jpg"> -->

<!-- ## PaaS 平台环境规划和搭建 -->

<!-- 主要是包括所有的管理过程，整合成一套体系，方便自己的工具管理整合起来，同时集成自动化部署操作，便于后期自动迁移 -->

<!-- <img src="https://pic1.zhimg.com/80/v2-87966cfbc9c5713ae047551c7b22985c_720w.jpg"> -->

<!-- ### 研发过程管理 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-9662f948e793e73e91b73c1bbd9705e6_720w.jpg"> -->

<!-- ### 容器云环境规划（公网） -->

<!-- <img src="https://pic2.zhimg.com/80/v2-6fe402e74b120a9a0cb0810ad117594d_720w.jpg"> -->

<!-- ### 基础环境规划 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-a5a78cd6023ac06004c2efbf9063bf92_720w.jpg"> -->

<!-- ### 自动化环境规划 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-3787542aa73cde3dbc159a7ee7ba03d2_720w.jpg"> -->

<!-- ### 大数据环境 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-cdb520899e0b0d3fb2abce0bba98b99e_720w.jpg"> -->

<!-- ## 个人的基础研发框架搭建 -->

<!-- 这里整合了很多内容，主要是结合自己的 gitee 和 github 学习基线来整合起来的，同时整合成一套东西，在上面建设业务系统，快速搭建成一套东西。 -->

<!-- 基础研发架构：包含有微服务、通用功能服务，通用开发文档，常用的业务组件，开发组件等，基础这层做研发，快速整合自己想要的功能。 -->

<!-- 搭建起来的效果，后期项目基于研发框架学习和开发，整合数据分析： -->

<!-- <img src="https://pic1.zhimg.com/80/v2-093940bcbb86a62149312bf8cf302000_720w.jpg"> -->

<!-- ### 基础研发框架规划 -->

<!-- <img src="https://pic2.zhimg.com/80/v2-b6030320f60ce7044b7c7ad134e4f369_720w.jpg"> -->

<!-- ## 怎么结合自动化运维来管理环境 -->

<!-- > 一个人的管理，主要是结合自动化，达到发现问题，处理问题两个角度。 -->

<!-- ### 1、自动化运维的管理和规划 -->

<!-- 整个自动化的管理和通知，需要结合很多东西，整体环境怎么自动化操作和管理，这里主要是结合监控-巡检-预警-通知几个序列，监控从服务器-应用-日志-安全几个维度监控，应用交互（chatops/通知）从移动端来进行管理，毕竟一个人管理这些环境，没有工具是很难去集成管理的，自动化操作主要是集成 jenkins 和自研应用来进行管理。 -->

<!-- <img src="https://pic3.zhimg.com/80/v2-832a2d5599cf60a751adcf282dfc30fa_720w.jpg"> -->

<!-- ### 2、自动化运维部署和搭建 -->

<!-- #### 运维管理平台 -->

<!-- <img src="https://pic1.zhimg.com/80/v2-e23821d6cd6a8c790b8936d87366b2c8_720w.jpg"> -->

<!-- ### 3、ChatOps 自动化管理规划 -->

<!-- 整体收集大量的应用监控预警通知，通过监控通知集成，与 dingtalk 集成交互，形成有问题可发现，可处理，自动化，移动化的一体系。 -->

<!-- 整体结合钉钉进行 ChatOps 的自动化运维监控，通过自定义开发的 webhook 工具，进行处理操作，比如 jenkins 自动重启，自动巡检等，类似于现在的智能客服概念： -->

<!-- <img src="https://pic2.zhimg.com/80/v2-ba9cd33ae4fb79571961298f505d6869_720w.jpg"> -->

<!-- ## 这套环境搭建的成本是多少 -->

<!-- 这个根据个人的情况来定，这里主要是结合自身的基础情况和评估来看，针对于这个成本来说，自己主要考虑的是时间成本，对自己而言时间是最大的成本点。 -->

<!-- ### 1、环境的采购费用 -->

<!-- 这里主要针对于个人和性价比考虑，这里不包括企业的，以下年限为一般生命周期多少年，这里只是做评估： -->

<!-- <img src="https://pic1.zhimg.com/80/v2-87cf5192d8daa13f7e6c01d723fc221c_720w.jpg"> -->

<!-- ### 2、投入和产出的比 -->

<!-- 这里主要按普通研发人员的角度考虑，假设一天中，因为开发，笔记本快慢，工具便利速度，资料查看效率等，每天节省 1.5 个小时换算，按 4 年周期时间，则可节省 90 天左右。 -->

<!-- 按天收益角度考虑，假设天收益在 1500~2500 左右，则可节省 13 万~22 万左右，而其它的个人提升另为算，所以整体来说，投入和产出比相对是比较高的。 -->

<!-- ## 总结 -->

<!-- 以上是自己搭建个人学习环境的情况和思路 -->
